
%div.question-show
  %div#question.question-item
    %div.question-item-main
      %div.question-item-main-content.flexiblebox
        = @question.content
    %div.question-item-footer.row
      %div.question-item-footer-left.col-4
        =image_tag "title_logo_1.png"
      %div.question-item-footer-center.col-4
        - if @question.answers.length > 0
          = image_tag "communication-4.png"
          = @question.answers.length
      %div.question-item-footer-right.col-4
        = render 'share/username', obj: @question, anonymous: false, link: true

  - if @answers.present?
    %div.answers
      %ul.answer-list
        - @answers.each do |answer|
          %li.answer-item
            = render 'answer_header', answer: answer
            = link_to(answer.affiliate_url, class: '', target: ["_blank"]) do
              %div.answer-inner.row
                %div.answer-item-left.col-1
                %div.answer-item-content.col-8
                  %div.answer-book-info
                    %div.answer-title
                      = answer.book_title
                    %div.answer-book-authors
                      = answer.authors_txt
                  %div.answer-content
                    = answer.content
                %div.answer-item-image.col-3
                  = image_tag answer.book_image_url

      = paginate @answers
  - else
    %div.white-back.no-answer
      %div.large= "まだ回答がありません"
      %div.middle= "あなたのオススメの本を教えてください！"
      = image_tag "LogoMark_Blue.png"


  - if current_user
    = form_for @answer,  html: {id: 'answer_form', class: 'form' }  do |f|
      %div.white-back
        - if @answer.errors.any?
          #error_explanation
            -# %h2= "#{pluralize(@answer.errors.count, "error")} prohibited this answer from being saved:"
            %ul
              - @answer.errors.full_messages.each do |message|
                %li= message

        .field
          -# TODO: title required
          %div#answer-title-dummy-input
            %input{:name => "title_dummy", :placeholder => "オススメの本はこちら", :class=> "input-title input-answer", :id => "answer-title-input"}
          %div#answer-title-tag.d-none.input-title.input-answer
            %div.title-tag.d-inline-block= ""
            %div#answer-title-remove.d-inline-block.btn.remove-button= "x"
          = f.hidden_field :title, :placeholder => "本のタイトルを入力", :class=> "input-title input-answer", :id => "answer-title-input-form"
          = f.text_area :content, required: true, :placeholder => "ここにコメントを書いて投稿しよう", :class=> "input-answer input-question"
          = f.hidden_field :user_id, :value => current_user.id
          = f.hidden_field :question_id, :value => @question.id
          = f.hidden_field :book_id, :value => nil, :id => "answer-book-id"

        - if current_user.provider == "twitter"
          .field.tweet.separate
            %span.text= "Twitter"
            %div.checkbox
              = f.check_box :is_tweet, :id =>"checkbox1", :class=>"ios-toggle"
              = label "", "checkbox1", :class=>"checkbox-label"#, :data=>{:off=>"off" , :on=>"on"}
        - else
          .field.tweet.separate.disabled
            -# %div.fade
            %span.text= "Twitter"
            %div.checkbox
              = f.check_box :is_tweet, :checked=>false, :id =>"checkbox1", :class=>"ios-toggle"
              = label "", "checkbox1", :class=>"checkbox-label"#, :data=>{:off=>"off" , :on=>"on"}

      .actions-group
        .actions
          = f.submit 'twitter名で投稿する', class: "btn blue btn-base answer-submit", name: "normal"
        .actions
          = f.submit '匿名で投稿で投稿する', class: "btn orange btn-base answer-submit", name: "anonymous"


-# = link_to 'Edit', edit_question_path(@question)
-# \|
-# = link_to 'Back', questions_path
